{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\Mid Api Test\\\\nonseam_pay\\\\src\\\\pages\\\\Transaction.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport CryptoJS from \"crypto-js\";\nimport { useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Transaction = () => {\n  _s();\n  const location = useLocation();\n  const [decryptedData, setDecryptedData] = useState(null);\n  const [status, setStatus] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    // Read query params or URL-encoded form data\n    const query = new URLSearchParams(location.search);\n    const encData = query.get(\"encData\");\n    const statusParam = query.get(\"Status\");\n    const authId = query.get(\"AuthID\");\n    console.log(\"üîÅ Returned from payment:\", {\n      encData,\n      statusParam,\n      authId\n    });\n    if (!encData) {\n      setError(\"No encrypted data found.\");\n      return;\n    }\n    try {\n      // Retrieve AuthKey stored in localStorage during MainPage transaction\n      const authKey = localStorage.getItem(\"currentAuthKey\");\n      if (!authKey) {\n        setError(\"AuthKey not found in localStorage.\");\n        return;\n      }\n      const key = CryptoJS.enc.Utf8.parse(authKey.padEnd(32, \"0\"));\n      const iv = CryptoJS.enc.Utf8.parse(authKey.substring(0, 16));\n      const decrypted = CryptoJS.AES.decrypt(encData, key, {\n        iv,\n        mode: CryptoJS.mode.CBC,\n        padding: CryptoJS.pad.Pkcs7\n      });\n      const decryptedText = decrypted.toString(CryptoJS.enc.Utf8);\n      const parsedData = JSON.parse(decryptedText);\n      console.log(\"‚úÖ Decrypted Data:\", parsedData);\n      setDecryptedData(parsedData);\n      setStatus(statusParam || \"Unknown\");\n    } catch (err) {\n      console.error(\"‚ùå Decryption failed:\", err);\n      setError(\"Failed to decrypt data.\");\n    }\n  }, [location.search]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"2rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83D\\uDD04 Transaction Status\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this), !error && decryptedData && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"left\",\n        marginTop: \"1rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Status:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 14\n        }, this), \" \", status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Customer Ref No:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 14\n        }, this), \" \", decryptedData.CustRefNum]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Amount:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 14\n        }, this), \" \\u20B9\", decryptedData.txn_Amount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Mobile:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 14\n        }, this), \" \", decryptedData.ContactNo]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 14\n        }, this), \" \", decryptedData.EmailId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Payment Date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 14\n        }, this), \" \", decryptedData.PaymentDate]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(Transaction, \"V30GUemf4QKXsyAgfHNxCgmqq9U=\", false, function () {\n  return [useLocation];\n});\n_c = Transaction;\nexport default Transaction;\nvar _c;\n$RefreshReg$(_c, \"Transaction\");","map":{"version":3,"names":["React","useEffect","useState","CryptoJS","useLocation","jsxDEV","_jsxDEV","Transaction","_s","location","decryptedData","setDecryptedData","status","setStatus","error","setError","query","URLSearchParams","search","encData","get","statusParam","authId","console","log","authKey","localStorage","getItem","key","enc","Utf8","parse","padEnd","iv","substring","decrypted","AES","decrypt","mode","CBC","padding","pad","Pkcs7","decryptedText","toString","parsedData","JSON","err","style","children","fileName","_jsxFileName","lineNumber","columnNumber","color","textAlign","marginTop","CustRefNum","txn_Amount","ContactNo","EmailId","PaymentDate","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/Desktop/Mid Api Test/nonseam_pay/src/pages/Transaction.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport CryptoJS from \"crypto-js\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst Transaction = () => {\r\n  const location = useLocation();\r\n  const [decryptedData, setDecryptedData] = useState(null);\r\n  const [status, setStatus] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    // Read query params or URL-encoded form data\r\n    const query = new URLSearchParams(location.search);\r\n    const encData = query.get(\"encData\");\r\n    const statusParam = query.get(\"Status\");\r\n    const authId = query.get(\"AuthID\");\r\n\r\n    console.log(\"üîÅ Returned from payment:\", {\r\n      encData,\r\n      statusParam,\r\n      authId,\r\n    });\r\n\r\n    if (!encData) {\r\n      setError(\"No encrypted data found.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Retrieve AuthKey stored in localStorage during MainPage transaction\r\n      const authKey = localStorage.getItem(\"currentAuthKey\");\r\n\r\n      if (!authKey) {\r\n        setError(\"AuthKey not found in localStorage.\");\r\n        return;\r\n      }\r\n\r\n      const key = CryptoJS.enc.Utf8.parse(authKey.padEnd(32, \"0\"));\r\n      const iv = CryptoJS.enc.Utf8.parse(authKey.substring(0, 16));\r\n\r\n      const decrypted = CryptoJS.AES.decrypt(encData, key, {\r\n        iv,\r\n        mode: CryptoJS.mode.CBC,\r\n        padding: CryptoJS.pad.Pkcs7,\r\n      });\r\n\r\n      const decryptedText = decrypted.toString(CryptoJS.enc.Utf8);\r\n      const parsedData = JSON.parse(decryptedText);\r\n\r\n      console.log(\"‚úÖ Decrypted Data:\", parsedData);\r\n      setDecryptedData(parsedData);\r\n      setStatus(statusParam || \"Unknown\");\r\n\r\n    } catch (err) {\r\n      console.error(\"‚ùå Decryption failed:\", err);\r\n      setError(\"Failed to decrypt data.\");\r\n    }\r\n  }, [location.search]);\r\n\r\n  return (\r\n    <div style={{ padding: \"2rem\" }}>\r\n      <h2>üîÑ Transaction Status</h2>\r\n\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n\r\n      {!error && decryptedData && (\r\n        <div style={{ textAlign: \"left\", marginTop: \"1rem\" }}>\r\n          <p><strong>Status:</strong> {status}</p>\r\n          <p><strong>Customer Ref No:</strong> {decryptedData.CustRefNum}</p>\r\n          <p><strong>Amount:</strong> ‚Çπ{decryptedData.txn_Amount}</p>\r\n          <p><strong>Mobile:</strong> {decryptedData.ContactNo}</p>\r\n          <p><strong>Email:</strong> {decryptedData.EmailId}</p>\r\n          <p><strong>Payment Date:</strong> {decryptedData.PaymentDate}</p>\r\n          {/* Add more fields as needed */}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Transaction;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}